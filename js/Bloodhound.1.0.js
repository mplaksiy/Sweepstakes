String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var Bloodhound=function(){var opts={owner:"TRM",pageId:"00_Tracking",convergeId:"NA",brandName:"SampleBrand",maxTagLen:100,pubAbbrev:"",tagSeperator:":",seperator:">",trackingProvider:"GA",replaceSpaces:!0,tagSpaceChar:"_",targets:[{target:".trm-track",event:"click"}],interactionType:[{type:"vid",desc:"Video"},{type:"pov",desc:"Pov#"},{type:"quiz",desc:"Quiz"},{type:"poll",desc:"Poll"},{type:"acco",desc:"Accordian"},{type:"access",desc:"Accessibility"},{type:"art",desc:"Article"},{type:"rec",desc:"Recipe"},{type:"prod",desc:"Product"},{type:"brand",desc:"Brand"},{type:"rtt",desc:"Return To Top"},{type:"cat",desc:"Categories"},{type:"cat",desc:"Giveaway"},{type:"save",desc:"Save"},{type:"coupons",desc:"Coupons"},{type:"scroll",desc:"Scroll"},{type:"social",desc:"Social"},{type:"perk",desc:"Perk"},{type:"box",desc:"Box Filter"},{type:"see more",desc:"See more"},{type:"form",desc:"Form"},{type:"link",desc:"link"},{type:"subnav",desc:"Sub Nav"},{type:"mainnav",desc:"Main Nav"}],allowDuplicateTags:!1},settings={trackTargets:[],page:"Tracking",device:"D",location:"",objectType:"",lastTag:"",clearLastTimeOut:null},app={pub:{init:function(){app.priv.debug("Start Initialize Bloodhound.","init"),"undefined"!=typeof BloodHoundVars?opts=app.priv.extend(opts,BloodHoundVars):console.log("Default options used.","init"),opts.targets.forEach(function(currentVal,index,arr){app.priv.debug(".on added with: "+currentVal.event+" "+currentVal.target);for(var classname=document.querySelectorAll(currentVal.target),i=0;i<classname.length;i++)classname[i].addEventListener(currentVal.event,app.priv.processEvent,!1);var targetName=app.priv.fixTargetName(currentVal.target);settings.trackTargets[targetName]=currentVal});var loadedEvent=new CustomEvent("onBhLoaded",{detail:{pageId:opts.pageId,label:"Bloodhound successfully initiated.",provider:opts.trackingProvider}});document.dispatchEvent(loadedEvent)},buildQuickTag:function(cta,sectionDescription,interactionType){return app.pub.buildTag(cta,sectionDescription,interactionType,opts.convergeId,opts.brandName)},buildTag:function(cta,sectionDescription,interactionType,sectionId,refreshConverge,brandName){var converge="undefined"!=typeof refreshConverge?refreshConverge:opts.convergeId;brandName="undefined"!=typeof brandName?brandName:opts.brandName;var tag=opts.owner+opts.tagSeperator+opts.pageId+opts.tagSeperator+converge+opts.tagSeperator+brandName+opts.tagSeperator+sectionDescription+opts.tagSeperator+interactionType+opts.tagSeperator+sectionId+opts.tagSeperator+app.priv.fixString(cta);return tag},processTarget:function(el){if(el){var tag=app.priv.getItemAttributes(el);tag&&app.priv.track(tag)}},track:function(tag){returnval={tag:tag,success:!1},tag&&app.priv.track(tag)}},priv:{debug:function(str,id){"function"==typeof app.priv.addOutput&&app.priv.addOutput(str,id)},pageLocation:function(){return""},processEvent:function(e){var tag=app.priv.getItemAttributes(this,e);tag&&app.priv.track(tag)},getItemAttributes:function(item){var sec=app.priv.getClosest(item,"section"),sectionDescription=sec.getAttribute("data-name")?sec.getAttribute("data-name"):!1,interactionType=item.getAttribute("data-type")?item.getAttribute("data-type"):!1,sectionId=item.getAttribute("data-id")?item.getAttribute("data-id"):!1;converge=item.getAttribute("data-refreshid")?item.getAttribute("data-refreshid"):opts.convergeId,brandName=item.getAttribute("data-brandname")?item.getAttribute("data-brandname"):opts.brandName;var cta="";if(""!==item.textContent.trim())cta=app.priv.fixString(item.textContent);else if(app.priv.hasElem(item,"img")){var imgElem=(app.priv.hasElem(item,"img"),item.getElementsByTagName("img"));cta=imgElem[0].getAttribute("alt")?imgElem[0].getAttribute("alt"):!1}else item.value&&(cta=item.value);if(sectionDescription&&interactionType&&sectionId&&cta){var trackStr=app.pub.buildTag(cta,sectionDescription,interactionType,sectionId,converge,brandName);return trackStr}return app.priv.debug("EVENT ERROR: Missing param."),!1},fixTargetName:function(str){return str.replace(/[^A-Z0-9]/gi,"")},titleCase:function(str){for(var splitStr=str.toLowerCase().split(" "),i=0;i<splitStr.length;i++)splitStr[i]=splitStr[i].charAt(0).toUpperCase()+splitStr[i].substring(1);return splitStr.join(" ")},fixString:function(str){var newStr=app.priv.titleCase(str),new_str="";return opts.replaceSpaces&&(new_str=newStr.replace(/[^A-Z0-9>]/gi,opts.tagSpaceChar)),new_str},clearLast:function(){settings.lastTag=""},extend:function(defaults,options){var prop,extended={};for(prop in defaults)Object.prototype.hasOwnProperty.call(defaults,prop)&&(extended[prop]=defaults[prop]);for(prop in options)Object.prototype.hasOwnProperty.call(options,prop)&&(extended[prop]=options[prop]);return extended},hasElem:function(item,selector){for(var kids=item.children,i=0;i<kids.length;i++)return kids[i].getElementsByTagName(selector)},getClosest:function(elem,selector){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){for(var matches=(this.document||this.ownerDocument).querySelectorAll(s),i=matches.length;--i>=0&&matches.item(i)!==this;);return i>-1});elem&&elem!==document;elem=elem.parentNode)if(elem.matches(selector))return elem;return null},track:function(label,section){var event,allow=settings.lastTag!==label+section?!0:opts.allowDuplicateTags,success=!1,detail={},sendEvent=!1,errors=1,errorLabel="";if(section=void 0===typeof section?"":section,allow){switch(opts.trackingProvider.toUpperCase()){case"GA":"function"==typeof ga?ga("send","event",opts.pageId,section,label):(errors=1,errorLabel="GA undefined."),success=!0,sendEvent=!0;break;case"ADOBE":var hasAdobe=!1;hasAdobe?success=!0:(errors=1,errorLabel="GA undefined."),sendEvent=!0}sendEvent&&(detail={pageId:opts.pageId,section:section,label:label,provider:opts.trackingProvider.toUpperCase(),errors:errors,errorLabel:errorLabel},event=new CustomEvent("onBh",{detail:detail}),document.dispatchEvent(event)),settings.lastTag=label+section}return success}}};return"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?app.pub.init():document.addEventListener("DOMContentLoaded",function(){app.pub.init()}),app.pub}();
//# sourceMappingURL=Bloodhound.1.0.map